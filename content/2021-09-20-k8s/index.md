---
title: k8s
date: "2021-09-20"
path: blog/k8s
draft: false
cover: ./k8s.png
tags: [ 运维 ]
excerpt: "运维"
---

### k8s
- [k8s是啥子](#k8s是啥子)
- [k8s为什么有用](#k8s为什么有用)
- [k8s与docker](#k8s与docker)
- [常用概念](#常用概念)
- 安装

------
#### k8s是啥子
Kubernetes 是一个可移植的、可扩展的开源平台，用于管理容器化的工作负载和服务，可促进声明式配置和自动化。

#### k8s为什么有用
- 先看历史
  - 传统部署时代
  物理服务器上运行应用程序。 无法为物理服务器中的应用程序定义资源边界，这会导致资源分配问题

  - 虚拟化部署时代
  虚拟化技术允许你在单个物理服务器的 CPU 上运行多个虚拟机（VM）

  - 容器部署时代
  容器类似于 VM，但是它们具有被放宽的隔离属性，可以在应用程序之间共享操作系统（OS）。 因此，容器被认为是轻量级的。容器与 VM 类似，具有自己的文件系统、CPU、内存、进程空间等。
- Kubernetes 为你提供了一个可弹性运行分布式系统的框架。 Kubernetes 会满足你的扩展要求、故障转移、部署模式等。
  - 服务发现和负载均衡 就这一条就是最关键的
  - 服务自愈
  - 服务弹性扩容
  - 横向扩容
  - 存储卷挂载

#### k8s与docker
- Docker是一个开源的应用容器引擎，开发者可以打包他们的应用及依赖到一个可移植的容器中，发布到流行的Linux机器上，也可实现虚拟化。
- k8s是一个开源的容器集群管理系统，可以实现容器集群的自动化部署、自动扩缩容、维护等功能。

#### 常用概念
- **节点(Master node and Worker node)**
在k8s中有两种节点：管理节点（Master Node）和工作节点（Worker Node）
  - 管理节点（Master Node）：负责管理整个k8s集群，一般由3个管理节点组成HA的架构。
  - 工作节点（Worker Node）：主要负责运行容器。
- **命名空间(Namespace)**
k8s命名空间主要用于隔离集群资源、隔离容器等，为集群提供了一种虚拟隔离的策略；默认存在3个名字空间，分别是默认命名空间 default、系统命名空间 kube-system 和 kube-public。
- **Object**
k8s 对象(Object)是一种持久化存储并且用于表示集群状态的实体。
- **POD**
Pod是 Kubernetes 部署应用或服务的最小的基本单位。一个Pod 封装多个应用容器（也可以只有一个容器）、存储资源、一个独立的网络 IP 以及管理控制容器运行方式的策略选项。 
是一种控制器，负责监控和维护集群中pod的副本(replicas)数，确保pod的副本数是我们期望的样子。
- **部署(Deployment)**
表示对k8s集群的一次更新操作，是k8s集群中最常用的Object，主要用于部署应用。支持滚动升级。
- **服务 (service)**
是对应用的抽象，也是k8s中的基本操作单元，一个服务背后由多个pod支持，服务通过负载均衡策略将请求转发到容器中。
- **Ingress**
是一种网关服务，可以将k8s服务通过http协议暴露到外部。
- **无状态应用 & 有状态应用**
  - 无状态应用指的是应用在容器中运行时候不会在容器中持久化存储数据，应用容器可以随意创建、销毁 例如：web应用
  - 有状态应用指的是应用在容器中运行时候需要稳定的持久化存储、稳定的网络标识、固定的pod启动和停止次序 例如：mysql数据库