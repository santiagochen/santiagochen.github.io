{"componentChunkName":"component---src-templates-post-post-jsx","path":"/blog/koa-booster","result":{"data":{"markdownRemark":{"html":"<h3>koa-booster</h3>\n<ul>\n<li>\n<p>Usage</p>\n<ul>\n<li>install koa</li>\n<li>install koa-booster</li>\n<li>\n<p>init in App.js</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const Koa = require(&#39;koa&#39;)\nconst app = new Koa()\nmodule.exports = require(&#39;koa-boost&#39;)(app)</code></pre></div>\n</li>\n</ul>\n</li>\n<li>\n<p>Options</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">module.exports = require(&#39;koa-boost)(app, {\n//HOST 可选\nhost: &#39;127.0.0.1&#39;, \n//PORT 可选\nport: 3001,\n//环境变量，决定配置变量的取值 可选\nenv: &#39;test&#39;,\n//中间件 可选\nmiddlewares: app=&gt;[\n  require(&#39;koa-static&#39;)(&#39;public&#39;, {\n      maxage: 1000 * 60 * 30\n    }\n  ),\n  require(&#39;koa-body&#39;)(),\n  require(&#39;koa-session&#39;)({\n    store : null,\n    key: app.config.key\n  },app),\n  require(&#39;./middlewares/m1&#39;)({name:&#39;rename&#39;}),\n  require(&#39;./middlewares/m2&#39;)(),\n],\n})</code></pre></div>\n</li>\n<li>\n<p>Structure</p>\n<ul>\n<li>router 路由</li>\n<li>controller 控制器</li>\n<li>service 数据查询</li>\n<li>middlewares 中间件</li>\n<li>utils 工具模块</li>\n<li>config 配置</li>\n<li>app.js</li>\n</ul>\n</li>\n<li>\n<p>App</p>\n<blockquote>\n<p>router, controller, service, utils, config</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">app.{模块名称}.{方法名}()\n\napp.{模块名称}.{变量名}</code></pre></div>\n</li>\n<li>\n<p>Context</p>\n<blockquote>\n<p>controller, service, utils, config</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">ctx.{模块名称}.{方法名}()\n\nctx.{模块名称}.{变量名}</code></pre></div>\n</li>\n<li>\n<p>Router示例</p>\n<ul>\n<li>\n<blockquote>\n<p>/router/index.js index.js会对应为服务根路由: /</p>\n</blockquote>\n</li>\n<li>\n<blockquote>\n<p>/router/demo.js demo.js会对应服务路由: /demo</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">module.exports = (app) =&gt;{\nconst { router, controller, middlewares } = app\nrouter.get(&#39;/&#39;,  controller.demo.t1 )\nrouter.get(&#39;/class/:id&#39;, middlewares.m1({name: 200}), controller.demo.t2 )\nrouter.post(&#39;/classmate/:name&#39;, controller.demo.t3 )\n}</code></pre></div>\n</li>\n</ul>\n</li>\n<li>\n<p>Controller示例</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">module.exports = {\nasync t1(ctx){\n  let resp = await ctx.service.demo.t1()\n  ctx.body = {\n    data: resp,\n    h1: ctx.h1,\n    h2: ctx.h2,\n    h3: ctx.h3\n  }\n},\nt2(ctx){\n  ctx.body = {\n    data: &#39;classId: &#39;+ctx.params.id\n  }\n},\n};\n或传入APP\nmodule.exports = (app)=&gt;({\nasync t1(ctx){\n  let data = await ctx.service.demo.t1()\n  ctx.body = {\n    data: data,\n    h1: ctx.h1 + &quot;: add 5+6 : &quot; + ctx.utils.tool.add(5,6),\n    h2: ctx.h2 + &quot;: add 2+3 : &quot; + ctx.utils.plus(2,3),\n    h3: ctx.h3\n  }\n}\n})</code></pre></div>\n</li>\n<li>\n<p>Service示例</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">module.exports = {\nt1: ()=&gt;{\n  let d = 888\n  return d\n}\n}\n或传入APP\nmodule.exports = (app)=&gt;({\nt1(){\n  let d = app.config.number * 100\n  return d\n},\nt2(params){\n  return app.config.knex.from(&#39;note&#39;).select([&quot;id&quot;,&quot;name&quot;]).limit(params.size)\n},\nt3(){return 98}\n})</code></pre></div>\n</li>\n<li>\n<p>Utils示例</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">module.exports = {\nindex: (a,b)=&gt;{return a+b}\n}\n或传入APP\nmodule.exports = (app)=&gt;(a,b)=&gt;{\nreturn a+b+app.config.number\n}\nmodule.exports = (app)=&gt;({\nadd(a,b){\n  return a+b+app.config.number\n},\nminus(a,b){\n  return a-b-app.config.number\n}\n})</code></pre></div>\n</li>\n<li>\n<p>Config示例</p>\n<ul>\n<li>config.js 默认配置文件</li>\n<li>\n<p>config.{env}.js 当前环境配置文件(会与默认配置文件合并生成最终config)</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">module.exports = {\nkeys: &quot;key1&quot;,\nrules: require(&#39;./rules&#39;), //内容太多，独立一个文件\nnumber: 100\n}</code></pre></div>\n</li>\n</ul>\n</li>\n<li>\n<p>Middlewares示例</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">module.exports = (options)=&gt;{\nreturn async (ctx, next)=&gt;{\n  ctx.h1=&#39;h1:&#39;+ options.name\n  await next()\n}\n}</code></pre></div>\n</li>\n</ul>","timeToRead":2,"frontmatter":{"title":"Koa-booster 文档介绍","date":"22 Dec 2020","tags":["nodejs"],"path":"blog/koa-booster","excerpt":"让Koa变得更简单","cover":{"childImageSharp":{"fluid":{"tracedSVG":"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='400'%20height='288'%20viewBox='0%200%20400%20288'%20preserveAspectRatio='none'%3e%3cpath%20d='M190%20103c-4%201-13%209-15%2011-2%203-1%2051%201%2054%202%202%2021%208%2026%208%204%200%209-3%2011-5l3-2%205-3%203-3v-26l-1-27-27-9-6%202m2%2075l-10%205c-6%205-7%205-7%2010-1%206-1%206%2013%209%2015%204%2018%204%2028-2l8-4v-5c0-5%200-6-3-8-6-4-21-6-29-5'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e","aspectRatio":1.3888888888888888,"src":"/static/9757369cb7d5b643993b7f059d41e2c1/a7715/placeholder.jpg","srcSet":"/static/9757369cb7d5b643993b7f059d41e2c1/8f7df/placeholder.jpg 250w,\n/static/9757369cb7d5b643993b7f059d41e2c1/0f3a1/placeholder.jpg 500w,\n/static/9757369cb7d5b643993b7f059d41e2c1/a7715/placeholder.jpg 1000w,\n/static/9757369cb7d5b643993b7f059d41e2c1/7f945/placeholder.jpg 1440w","sizes":"(max-width: 1000px) 100vw, 1000px"}}}}},"allMarkdownRemark":{"edges":[{"node":{"frontmatter":{"path":"blog/activity-component-builder","title":"活动组件开发实战总结","tags":["nodejs"],"excerpt":"项目总结","cover":{"childImageSharp":{"fluid":{"tracedSVG":"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='400'%20height='288'%20viewBox='0%200%20400%20288'%20preserveAspectRatio='none'%3e%3cpath%20d='M190%20103c-4%201-13%209-15%2011-2%203-1%2051%201%2054%202%202%2021%208%2026%208%204%200%209-3%2011-5l3-2%205-3%203-3v-26l-1-27-27-9-6%202m2%2075l-10%205c-6%205-7%205-7%2010-1%206-1%206%2013%209%2015%204%2018%204%2028-2l8-4v-5c0-5%200-6-3-8-6-4-21-6-29-5'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e","aspectRatio":1.3888888888888888,"src":"/static/9757369cb7d5b643993b7f059d41e2c1/4fe8c/placeholder.jpg","srcSet":"/static/9757369cb7d5b643993b7f059d41e2c1/aabdf/placeholder.jpg 150w,\n/static/9757369cb7d5b643993b7f059d41e2c1/9dc27/placeholder.jpg 300w,\n/static/9757369cb7d5b643993b7f059d41e2c1/4fe8c/placeholder.jpg 600w,\n/static/9757369cb7d5b643993b7f059d41e2c1/9842e/placeholder.jpg 900w,\n/static/9757369cb7d5b643993b7f059d41e2c1/47498/placeholder.jpg 1200w,\n/static/9757369cb7d5b643993b7f059d41e2c1/7f945/placeholder.jpg 1440w","sizes":"(max-width: 600px) 100vw, 600px"}}}}}},{"node":{"frontmatter":{"path":"blog/good-practise-sync-code","title":"商品码同步实战总结","tags":["nodejs"],"excerpt":"项目总结","cover":{"childImageSharp":{"fluid":{"tracedSVG":"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='400'%20height='288'%20viewBox='0%200%20400%20288'%20preserveAspectRatio='none'%3e%3cpath%20d='M190%20103c-4%201-13%209-15%2011-2%203-1%2051%201%2054%202%202%2021%208%2026%208%204%200%209-3%2011-5l3-2%205-3%203-3v-26l-1-27-27-9-6%202m2%2075l-10%205c-6%205-7%205-7%2010-1%206-1%206%2013%209%2015%204%2018%204%2028-2l8-4v-5c0-5%200-6-3-8-6-4-21-6-29-5'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e","aspectRatio":1.3888888888888888,"src":"/static/9757369cb7d5b643993b7f059d41e2c1/4fe8c/placeholder.jpg","srcSet":"/static/9757369cb7d5b643993b7f059d41e2c1/aabdf/placeholder.jpg 150w,\n/static/9757369cb7d5b643993b7f059d41e2c1/9dc27/placeholder.jpg 300w,\n/static/9757369cb7d5b643993b7f059d41e2c1/4fe8c/placeholder.jpg 600w,\n/static/9757369cb7d5b643993b7f059d41e2c1/9842e/placeholder.jpg 900w,\n/static/9757369cb7d5b643993b7f059d41e2c1/47498/placeholder.jpg 1200w,\n/static/9757369cb7d5b643993b7f059d41e2c1/7f945/placeholder.jpg 1440w","sizes":"(max-width: 600px) 100vw, 600px"}}}}}},{"node":{"frontmatter":{"path":"blog/reading-about-casl","title":"了解CASL后关于权限的思考","tags":["abac"],"excerpt":"一个基于属性的访问控制模块","cover":{"childImageSharp":{"fluid":{"tracedSVG":"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='400'%20height='288'%20viewBox='0%200%20400%20288'%20preserveAspectRatio='none'%3e%3cpath%20d='M190%20103c-4%201-13%209-15%2011-2%203-1%2051%201%2054%202%202%2021%208%2026%208%204%200%209-3%2011-5l3-2%205-3%203-3v-26l-1-27-27-9-6%202m2%2075l-10%205c-6%205-7%205-7%2010-1%206-1%206%2013%209%2015%204%2018%204%2028-2l8-4v-5c0-5%200-6-3-8-6-4-21-6-29-5'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e","aspectRatio":1.3888888888888888,"src":"/static/9757369cb7d5b643993b7f059d41e2c1/4fe8c/placeholder.jpg","srcSet":"/static/9757369cb7d5b643993b7f059d41e2c1/aabdf/placeholder.jpg 150w,\n/static/9757369cb7d5b643993b7f059d41e2c1/9dc27/placeholder.jpg 300w,\n/static/9757369cb7d5b643993b7f059d41e2c1/4fe8c/placeholder.jpg 600w,\n/static/9757369cb7d5b643993b7f059d41e2c1/9842e/placeholder.jpg 900w,\n/static/9757369cb7d5b643993b7f059d41e2c1/47498/placeholder.jpg 1200w,\n/static/9757369cb7d5b643993b7f059d41e2c1/7f945/placeholder.jpg 1440w","sizes":"(max-width: 600px) 100vw, 600px"}}}}}},{"node":{"frontmatter":{"path":"blog/happy-talk-about-react-redux","title":"细说React-Redux","tags":["reactjs"],"excerpt":"记录点滴: 从redux过度到了react-redux。记录下相关的有趣的一些点。","cover":{"childImageSharp":{"fluid":{"tracedSVG":"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='400'%20height='288'%20viewBox='0%200%20400%20288'%20preserveAspectRatio='none'%3e%3cpath%20d='M190%20103c-4%201-13%209-15%2011-2%203-1%2051%201%2054%202%202%2021%208%2026%208%204%200%209-3%2011-5l3-2%205-3%203-3v-26l-1-27-27-9-6%202m2%2075l-10%205c-6%205-7%205-7%2010-1%206-1%206%2013%209%2015%204%2018%204%2028-2l8-4v-5c0-5%200-6-3-8-6-4-21-6-29-5'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e","aspectRatio":1.3888888888888888,"src":"/static/9757369cb7d5b643993b7f059d41e2c1/4fe8c/placeholder.jpg","srcSet":"/static/9757369cb7d5b643993b7f059d41e2c1/aabdf/placeholder.jpg 150w,\n/static/9757369cb7d5b643993b7f059d41e2c1/9dc27/placeholder.jpg 300w,\n/static/9757369cb7d5b643993b7f059d41e2c1/4fe8c/placeholder.jpg 600w,\n/static/9757369cb7d5b643993b7f059d41e2c1/9842e/placeholder.jpg 900w,\n/static/9757369cb7d5b643993b7f059d41e2c1/47498/placeholder.jpg 1200w,\n/static/9757369cb7d5b643993b7f059d41e2c1/7f945/placeholder.jpg 1440w","sizes":"(max-width: 600px) 100vw, 600px"}}}}}},{"node":{"frontmatter":{"path":"blog/markdown-in-react","title":"Markdown in React","tags":["reactjs"],"excerpt":"记录点滴: react-markdown是一款非常优秀的markdown转html的react组件，但是官方文档是全英文而且也没有说明的太详细，把开发遇到的问题以及实践方法记录下来。","cover":{"childImageSharp":{"fluid":{"tracedSVG":"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='400'%20height='288'%20viewBox='0%200%20400%20288'%20preserveAspectRatio='none'%3e%3cpath%20d='M190%20103c-4%201-13%209-15%2011-2%203-1%2051%201%2054%202%202%2021%208%2026%208%204%200%209-3%2011-5l3-2%205-3%203-3v-26l-1-27-27-9-6%202m2%2075l-10%205c-6%205-7%205-7%2010-1%206-1%206%2013%209%2015%204%2018%204%2028-2l8-4v-5c0-5%200-6-3-8-6-4-21-6-29-5'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e","aspectRatio":1.3888888888888888,"src":"/static/9757369cb7d5b643993b7f059d41e2c1/4fe8c/placeholder.jpg","srcSet":"/static/9757369cb7d5b643993b7f059d41e2c1/aabdf/placeholder.jpg 150w,\n/static/9757369cb7d5b643993b7f059d41e2c1/9dc27/placeholder.jpg 300w,\n/static/9757369cb7d5b643993b7f059d41e2c1/4fe8c/placeholder.jpg 600w,\n/static/9757369cb7d5b643993b7f059d41e2c1/9842e/placeholder.jpg 900w,\n/static/9757369cb7d5b643993b7f059d41e2c1/47498/placeholder.jpg 1200w,\n/static/9757369cb7d5b643993b7f059d41e2c1/7f945/placeholder.jpg 1440w","sizes":"(max-width: 600px) 100vw, 600px"}}}}}},{"node":{"frontmatter":{"path":"blog/BI-Data-Visualization","title":"BI数据可视化","tags":["nodejs"],"excerpt":"项目总结","cover":{"childImageSharp":{"fluid":{"tracedSVG":"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='400'%20height='288'%20viewBox='0%200%20400%20288'%20preserveAspectRatio='none'%3e%3cpath%20d='M190%20103c-4%201-13%209-15%2011-2%203-1%2051%201%2054%202%202%2021%208%2026%208%204%200%209-3%2011-5l3-2%205-3%203-3v-26l-1-27-27-9-6%202m2%2075l-10%205c-6%205-7%205-7%2010-1%206-1%206%2013%209%2015%204%2018%204%2028-2l8-4v-5c0-5%200-6-3-8-6-4-21-6-29-5'%20fill='%23d3d3d3'%20fill-rule='evenodd'/%3e%3c/svg%3e","aspectRatio":1.3888888888888888,"src":"/static/9757369cb7d5b643993b7f059d41e2c1/4fe8c/placeholder.jpg","srcSet":"/static/9757369cb7d5b643993b7f059d41e2c1/aabdf/placeholder.jpg 150w,\n/static/9757369cb7d5b643993b7f059d41e2c1/9dc27/placeholder.jpg 300w,\n/static/9757369cb7d5b643993b7f059d41e2c1/4fe8c/placeholder.jpg 600w,\n/static/9757369cb7d5b643993b7f059d41e2c1/9842e/placeholder.jpg 900w,\n/static/9757369cb7d5b643993b7f059d41e2c1/47498/placeholder.jpg 1200w,\n/static/9757369cb7d5b643993b7f059d41e2c1/7f945/placeholder.jpg 1440w","sizes":"(max-width: 600px) 100vw, 600px"}}}}}}]}},"pageContext":{"postPath":"blog/koa-booster","translations":[{"hreflang":"en","path":"/blog/koa-booster"}]}},"staticQueryHashes":["4097791827"]}